webpackJsonp([2],{"+GMJ":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("mtWM"),i=o.n(n),l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(t.texts,function(e,n){return o("v-flex",{key:"text"+n,attrs:{xs12:""}},[o("v-layout",{attrs:{"align-center":"","justify-start":"",row:""}},[o("v-flex",{attrs:{xs12:"",sm2:""}},[o("v-text-field",{attrs:{label:"x위치",name:"position_x",type:"number",outlined:"","hide-details":""},model:{value:e.position_x,callback:function(o){t.$set(e,"position_x",o)},expression:"text.position_x"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm2:""}},[o("v-text-field",{attrs:{label:"y위치",name:"position_y",type:"number",outlined:"","hide-details":""},model:{value:e.position_y,callback:function(o){t.$set(e,"position_y",o)},expression:"text.position_y"}})],1),t._v(" "),o("v-text-field",{attrs:{label:"텍스트",name:"text",type:"text",outlined:"","hide-details":""},model:{value:e.text,callback:function(o){t.$set(e,"text",o)},expression:"text.text"}}),t._v(" "),o("v-btn",{attrs:{outlined:"",fab:"",small:"",color:"red lighten-3"},on:{click:function(e){return t.$emit("deleteText",t.photo_index,n)}}},[o("v-icon",[t._v("remove")])],1)],1)],1)}),1)},staticRenderFns:[]},a={components:{PhotoTextBox:o("VU/8")({props:["texts","photo_index"]},l,!1,null,null,null).exports},props:["photos"],methods:{addText:function(t){this.photos[t].photo_texts.push({position_x:"",position_y:"",text:""})},deleteText:function(t,e){this.photos[t].photo_texts.splice(e,1)}}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(t.photos,function(e,n){return o("v-flex",{key:"photo"+n,attrs:{xs12:"","pb-5":""}},[o("v-layout",{attrs:{"align-center":"","justify-start":"",row:"","fill-height":""}},[o("v-text-field",{attrs:{label:"파일경로",name:"file_path",type:"text",outlined:"","hide-details":""},model:{value:e.file_path,callback:function(o){t.$set(e,"file_path",o)},expression:"photo.file_path"}}),t._v(" "),o("v-text-field",{attrs:{label:"파일이름",name:"file_name",type:"text",outlined:"","hide-details":""},model:{value:e.file_name,callback:function(o){t.$set(e,"file_name",o)},expression:"photo.file_name"}}),t._v(" "),o("v-btn",{attrs:{outlined:"",fab:"",small:"",color:"deep-purple lighten-1"},on:{click:function(e){return t.addText(n)}}},[o("v-icon",[t._v("comment")])],1),t._v(" "),o("v-btn",{attrs:{outlined:"",fab:"",small:"",color:"red lighten-3"},on:{click:function(e){return t.$emit("deletePhoto",n)}}},[o("v-icon",[t._v("clear")])],1)],1),t._v(" "),o("PhotoTextBox",{attrs:{texts:e.photo_texts,photo_index:n},on:{deleteText:t.deleteText}})],1)}),1)},staticRenderFns:[]},c={components:{PhotoBox:o("VU/8")(a,s,!1,null,null,null).exports},data:function(){return{mode:null,document:{photos:[]}}},created:function(){-1!==this.$route.path.indexOf("new")?this.mode="new":(this.mode="edit",void 0!==this.$route.params.document?this.document=this.$route.params.document:this.getDocument(this.$route.params.id))},methods:{addPhoto:function(){this.document.photos.push({file_path:"",file_name:"",photo_texts:[]})},deletePhoto:function(t){this.document.photos.splice(t,1)},getDocument:function(t){var e=this;i()({method:"get",url:"/api/document/"+t}).then(function(t){e.document=t.data}).catch(function(t){console.log(t),alert("비정상 접근입니다."),e.$router.push({name:"home"})}).then(function(){})},saveDocument:function(){var t=this,e="post",o="/api/document";"edit"===this.mode&&(e="put",o+="/"+this.document.id),i()({method:e,url:o,contentType:"application/json",data:{id:this.document.id,title:this.document.title,content:this.document.content,photos:this.document.photos}}).then(function(e){alert("저장되었습니다."),t.$router.push({name:"show",params:{id:e.data.id}})}).catch(function(t){console.log(t),alert("저장에 실패했습니다.")}).then(function(){})}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-card",{staticClass:"pa-5",attrs:{elevation:"12"}},["new"===t.mode?o("v-card-title",[t._v("\n      새 글 작성\n    ")]):o("v-card-title",[t._v("\n      글 수정\n    ")]),t._v(" "),o("v-card-text",[o("v-form",["edit"===t.mode?o("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[o("v-text-field",{attrs:{label:"No.",name:"id",type:"text",outlined:"",readonly:""},model:{value:t.document.id,callback:function(e){t.$set(t.document,"id",e)},expression:"document.id"}})],1):t._e(),t._v(" "),o("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[o("v-text-field",{attrs:{label:"제목",name:"title",type:"text",outlined:"",required:"",rules:[function(t){return!!t||"필수입력값입니다."}]},model:{value:t.document.title,callback:function(e){t.$set(t.document,"title",e)},expression:"document.title"}})],1),t._v(" "),o("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[o("v-textarea",{attrs:{label:"내용",name:"content",outlined:"",required:"",rules:[function(t){return!!t||"필수입력값입니다."}]},model:{value:t.document.content,callback:function(e){t.$set(t.document,"content",e)},expression:"document.content"}})],1),t._v(" "),o("PhotoBox",{attrs:{photos:t.document.photos},on:{deletePhoto:t.deletePhoto}})],1)],1),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{outlined:"",fab:"",small:"",color:"deep-purple lighten-1"},on:{click:t.addPhoto}},[o("v-icon",[t._v("add_a_photo")])],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"indigo lighten-1",dark:""},on:{click:t.saveDocument}},[o("v-icon",[t._v("done")]),t._v("저장")],1)],1)],1)],1)},staticRenderFns:[]},d=o("VU/8")(c,r,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=2.1820a058dae5e0e15b4f.js.map